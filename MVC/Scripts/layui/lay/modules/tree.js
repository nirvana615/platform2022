/** layui-v2.5.6 MIT License By https://www.layui.com */
 ;layui.define("form",function(e){"use strict";var i=layui.$,a=layui.form,n=layui.layer,t="tree",c={config:{},index:layui[t]?layui[t].index+1e4:0,set:function(e){var a=this;return a.config=i.extend({},a.config,e),a},on:function(e,i){return layui.onevent.call(this,t,e,i)}},l=function(){var e=this,i=e.config,a=i.id||e.index;return l.that[a]=e,l.config[a]=i,{config:i,reload:function(i){e.reload.call(e,i)},getChecked:function(){return e.getChecked.call(e)},setChecked:function(i){return e.setChecked.call(e,i)}}},r="layui-hide",o="layui-disabled",d="layui-tree-set",s="layui-tree-iconClick",u="layui-icon-addition",h="layui-icon-subtraction",p="layui-tree-entry",y="layui-tree-main",f="layui-tree-txt",v="layui-tree-pack",k="layui-tree-spread",m="layui-tree-setLineShort",C="layui-tree-showLine",x="layui-tree-lineExtend",b=function(e){var a=this;a.index=++c.index,a.config=i.extend({},a.config,c.config,e),a.render()};b.prototype.config={data:[],showCheckbox:!1,showLine:!0,accordion:!1,onlyIconControl:!1,isJump:!1,edit:!1,customSpread:!1,customCheckbox:!1,customOperate:!1,cancelNodeFileIcon:!1,text:{defaultNodeName:"未命名",none:"无数据"}},b.prototype.reload=function(e){var a=this;layui.each(e,function(e,i){i.constructor===Array&&delete a.config[e]}),a.config=i.extend(!0,{},a.config,e),a.render()},b.prototype.render=function(){var e=this,a=e.config;e.checkids=[];var n=i('<div class="layui-tree'+(a.showCheckbox?" layui-form":"")+(a.showLine?" layui-tree-line":"")+'" lay-filter="LAY-tree-'+e.index+'"></div>');e.tree(n);var t=a.elem=i(a.elem);if(t[0]){if(e.key=a.id||e.index,e.elem=n,e.elemNone=i('<div class="layui-tree-emptyText">'+a.text.none+"</div>"),t.html(e.elem),0==e.elem.find(".layui-tree-set").length)return e.elem.append(e.elemNone);a.showCheckbox&&e.renderForm("checkbox"),e.elem.find(".layui-tree-set").each(function(){var e=i(this);e.parent(".layui-tree-pack")[0]||e.addClass("layui-tree-setHide"),!e.next()[0]&&e.parents(".layui-tree-pack").eq(1).hasClass("layui-tree-lineExtend")&&e.addClass(m),e.next()[0]||e.parents(".layui-tree-set").eq(0).next()[0]||e.addClass(m)}),e.events()}},b.prototype.renderForm=function(e){a.render(e,"LAY-tree-"+this.index)},b.prototype.tree=function(e,a){var n=this,t=n.config,c=a||t.data;layui.each(c,function(a,c){var l=c.children&&c.children.length>0,s=i('<div class="layui-tree-pack" '+(c.spread?'style="display: block;"':"")+'"></div>'),u=i(['<div data-id="'+c.id+'" class="layui-tree-set'+(c.spread?" layui-tree-spread":"")+(c.checked?" layui-tree-checkedFirst":"")+'">','<div class="layui-tree-entry">','<div class="layui-tree-main">',function(){return t.showLine?l?'<span class="layui-tree-iconClick layui-tree-icon"><i class="layui-icon '+(c.spread?"layui-icon-subtraction":"layui-icon-addition")+'"></i></span>':t.customSpread?'<span class="layui-tree-iconClick"></span>':t.cancelNodeFileIcon?'<span class="layui-tree-iconClick" style="margin-left: 0px;"></span>':'<span class="layui-tree-iconClick"><i class="layui-icon layui-icon-file"></i></span>':'<span class="layui-tree-iconClick"><i class="layui-tree-iconArrow '+(l?"":r)+'"></i></span>'}(),function(){return t.customCheckbox?c.showCheckbox?t.showCheckbox?'<input type="checkbox" name="'+(c.field||"layuiTreeCheck_"+c.id)+'" same="layuiTreeCheck" lay-skin="primary" '+(c.disabled?"disabled":"")+' value="'+c.id+'">':"":void 0:t.showCheckbox?'<input type="checkbox" name="'+(c.field||"layuiTreeCheck_"+c.id)+'" same="layuiTreeCheck" lay-skin="primary" '+(c.disabled?"disabled":"")+' value="'+c.id+'">':""}(),function(){return t.isJump&&c.href?'<a href="'+c.href+'" target="_blank" class="'+f+'">'+(c.title||c.label||t.text.defaultNodeName)+"</a>":void 0!=c.icon?c.icon+'<span class="'+f+(c.disabled?" "+o:"")+'">'+(c.title||c.label||t.text.defaultNodeName)+"</span>":'<span class="'+f+(c.disabled?" "+o:"")+'">'+(c.title||c.label||t.text.defaultNodeName)+"</span>"}(),"</div>",function(){if(!t.edit)return"";if(t.customOperate){if(!c.nodeOperate)return"";var e={add:'<i class="layui-icon layui-icon-read" data-type="add"></i>',update:'<i class="layui-icon layui-icon-edit" data-type="update"></i>',del:'<i class="layui-icon layui-icon-delete" data-type="del"></i>',view:'<i class="layui-icon layui-icon-add-1" data-type="view"></i>',up:'<i class="layui-icon layui-icon-up" data-type="up"></i>',down:'<i class="layui-icon layui-icon-down" data-type="down"></i>'},i=['<div class="layui-btn-group layui-tree-btnGroup">'];if(t.edit===!0&&(t.edit=["update","del"]),c.customItem){if("object"==typeof c.edit)return layui.each(c.edit,function(a,n){i.push(e[n]||"")}),i.join("")+"</div>"}else if("object"==typeof t.edit)return layui.each(t.edit,function(a,n){i.push(e[n]||"")}),i.join("")+"</div>"}else{var e={add:'<i class="layui-icon layui-icon-read" data-type="add"></i>',update:'<i class="layui-icon layui-icon-edit" data-type="update"></i>',del:'<i class="layui-icon layui-icon-delete" data-type="del"></i>'},i=['<div class="layui-btn-group layui-tree-btnGroup">'];if(t.edit===!0&&(t.edit=["update","del"]),"object"==typeof t.edit)return layui.each(t.edit,function(a,n){i.push(e[n]||"")}),i.join("")+"</div>"}}(),"</div></div>"].join(""));l&&(u.append(s),n.tree(s,c.children)),e.append(u),u.prev("."+d)[0]&&u.prev().children(".layui-tree-pack").addClass("layui-tree-showLine"),l||u.parent(".layui-tree-pack").addClass("layui-tree-lineExtend"),n.spread(u,c),t.showCheckbox&&(c.checked&&n.checkids.push(c.id),n.checkClick(u,c)),t.edit&&n.operate(u,c)})},b.prototype.spread=function(e,a){var n=this,t=n.config,c=e.children("."+p),l=c.children("."+y),r=c.find("."+s),m=c.find("."+f),C=t.onlyIconControl?r:l,x="";t.customSpread||C.on("click",function(i){var a=e.children("."+v),n=C.children(".layui-icon")[0]?C.children(".layui-icon"):C.find(".layui-tree-icon").children(".layui-icon");if(a[0]){if(e.hasClass(k))e.removeClass(k),a.slideUp(200),n.removeClass(h).addClass(u);else if(e.addClass(k),a.slideDown(200),n.addClass(h).removeClass(u),t.accordion){var c=e.siblings("."+d);c.removeClass(k),c.children("."+v).slideUp(200),c.find(".layui-tree-icon").children(".layui-icon").removeClass(h).addClass(u)}}else x="normal"}),m.on("click",function(){var n=i(this);n.hasClass(o)||(x=e.hasClass(k)?t.onlyIconControl?"open":"close":t.onlyIconControl?"close":"open",t.click&&t.click({elem:e,state:x,data:a}))})},b.prototype.setCheckbox=function(e,i,a){var n=this,t=(n.config,a.prop("checked"));if(!a.prop("disabled")){if("object"==typeof i.children||e.find("."+v)[0]){var c=e.find("."+v).find('input[same="layuiTreeCheck"]');c.each(function(){this.disabled||(this.checked=t)})}var l=function(e){if(e.parents("."+d)[0]){var i,a=e.parent("."+v),n=a.parent(),c=a.prev().find('input[same="layuiTreeCheck"]');t?c.prop("checked",t):(a.find('input[same="layuiTreeCheck"]').each(function(){this.checked&&(i=!0)}),i||c.prop("checked",!1)),l(n)}};l(e),n.renderForm("checkbox")}},b.prototype.checkClick=function(e,a){var n=this,t=n.config,c=e.children("."+p),l=c.children("."+y);l.on("click",'input[same="layuiTreeCheck"]+',function(c){layui.stope(c);var l=i(this).prev(),r=l.prop("checked");l.prop("disabled")||(n.setCheckbox(e,a,l),t.oncheck&&t.oncheck({elem:e,checked:r,data:a}))})},b.prototype.operate=function(e,a){var t=this,c=t.config,l=e.children("."+p);l.children("."+y);l.children(".layui-tree-btnGroup").on("click",".layui-icon",function(l){layui.stope(l);var o=i(this).data("type"),u=e.children("."+v),y={data:a,type:o,elem:e};"add"==o?c.operate&&c.operate(y):"update"==o?c.operate&&c.operate(y):"del"==o?n.confirm('确认删除 "<span style="color: #999;">'+(a.title||"")+'</span>" 吗？',function(a){if(c.operate&&c.operate(y),y.status="remove",n.close(a),!e.prev("."+d)[0]&&!e.next("."+d)[0]&&!e.parent("."+v)[0])return e.remove(),void t.elem.append(t.elemNone);if(e.siblings("."+d).children("."+p)[0]){if(c.showCheckbox){var l=function(e){if(e.parents("."+d)[0]){var a=e.siblings("."+d).children("."+p),n=e.parent("."+v).prev(),c=n.find('input[same="layuiTreeCheck"]')[0],r=1,o=0;0==c.checked&&(a.each(function(e,a){var n=i(a).find('input[same="layuiTreeCheck"]')[0];0!=n.checked||n.disabled||(r=0),n.disabled||(o=1)}),1==r&&1==o&&(c.checked=!0,t.renderForm("checkbox"),l(n.parent("."+d))))}};l(e)}if(c.showLine){var o=e.siblings("."+d),f=1,b=e.parent("."+v);layui.each(o,function(e,a){i(a).children("."+v)[0]||(f=0)}),1==f?(u[0]||(b.removeClass(x),o.children("."+v).addClass(C),o.children("."+v).children("."+d).removeClass(m)),e.next()[0]?b.children("."+d).last().children("."+v).children("."+d).last().addClass(m):e.prev().children("."+v).children("."+d).last().addClass(m),e.next()[0]||e.parents("."+d)[1]||e.parents("."+d).eq(0).next()[0]||e.prev("."+d).addClass(m)):!e.next()[0]&&e.hasClass(m)&&e.prev().addClass(m)}}else{var g=e.parent("."+v).prev();if(c.showLine){g.find("."+s).removeClass("layui-tree-icon"),g.find("."+s).children(".layui-icon").removeClass(h).addClass("layui-icon-file");var w=g.parents("."+v).eq(0);w.addClass(x),w.children("."+d).each(function(){i(this).children("."+v).children("."+d).last().addClass(m)})}else g.find(".layui-tree-iconArrow").addClass(r);e.parents("."+d).eq(0).removeClass(k),e.parent("."+v).remove()}e.remove()}):"view"==o?c.operate&&c.operate(y):"up"==o?c.operate&&c.operate(y):"down"==o&&c.operate&&c.operate(y)})},b.prototype.events=function(){var e=this,a=e.config;e.elem.find(".layui-tree-checkedFirst");e.setChecked(e.checkids),e.elem.find(".layui-tree-search").on("keyup",function(){var n=i(this),t=n.val(),c=n.nextAll(),l=[];c.find("."+f).each(function(){var e=i(this).parents("."+p);if(i(this).html().indexOf(t)!=-1){l.push(i(this).parent());var a=function(e){e.addClass("layui-tree-searchShow"),e.parent("."+v)[0]&&a(e.parent("."+v).parent("."+d))};a(e.parent("."+d))}}),c.find("."+p).each(function(){var e=i(this).parent("."+d);e.hasClass("layui-tree-searchShow")||e.addClass(r)}),0==c.find(".layui-tree-searchShow").length&&e.elem.append(e.elemNone),a.onsearch&&a.onsearch({elem:l})}),e.elem.find(".layui-tree-search").on("keydown",function(){i(this).nextAll().find("."+p).each(function(){var e=i(this).parent("."+d);e.removeClass("layui-tree-searchShow "+r)}),i(".layui-tree-emptyText")[0]&&i(".layui-tree-emptyText").remove()})},b.prototype.getChecked=function(){var e=this,a=e.config,n=[],t=[];e.elem.find(".layui-form-checked").each(function(){n.push(i(this).prev()[0].value)});var c=function(e,a){layui.each(e,function(e,t){layui.each(n,function(e,n){if(t.id==n){var l=i.extend({},t);return delete l.children,a.push(l),t.children&&(l.children=[],c(t.children,l.children)),!0}})})};return c(i.extend({},a.data),t),t},b.prototype.setChecked=function(e){var a=this;a.config;a.elem.find("."+d).each(function(a,n){var t=i(this).data("id"),c=i(n).children("."+p).find('input[same="layuiTreeCheck"]'),l=c.next();if("number"==typeof e){if(t==e)return c[0].checked||l.click(),!1}else"object"==typeof e&&layui.each(e,function(e,i){if(i==t&&!c[0].checked)return l.click(),!0})})},l.that={},l.config={},c.reload=function(e,i){var a=l.that[e];return a.reload(i),l.call(a)},c.getChecked=function(e){var i=l.that[e];return i.getChecked()},c.setChecked=function(e,i){var a=l.that[e];return a.setChecked(i)},c.render=function(e){var i=new b(e);return l.call(i)},e(t,c)});