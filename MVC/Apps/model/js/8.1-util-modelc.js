//工具栏
util.fixbar({
    bar1: '<li class="layui-icon" lay-type="bar1" id="utilbar1" style="margin:5px;border-radius:5px;background-color:#303336"><svg t="1647937004272" class="icon" viewBox="0 0 1172 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1294" width="50" height="50"><path d="M725.29694354 608.52915322a28.80645712 28.80645712 0 0 0 28.14169257-50.23402983 366.08575584 366.08575584 0 0 0-63.58471443-28.01981963 194.67625468 194.67625468 0 0 0 78.32032527-156.06452231c0-107.47024457-87.40543949-194.84244615-194.84244551-194.84244612S378.48935528 266.74053689 378.48935528 374.17754356a194.67625468 194.67625468 0 0 0 78.28708801 156.04236371c-3.72268075 1.24089336-7.42320224 2.51502528-11.07940718 3.87779226A369.78627735 369.78627735 0 0 0 211.0462821 809.37663746a28.80645712 28.80645712 0 1 0 56.5049744 11.07940719 311.70802729 311.70802729 0 0 1 457.74568704-211.92689143z m-289.17251476-234.35160966a137.22953127 137.22953127 0 1 1 137.20737268 137.22953063 137.38464278 137.38464278 0 0 1-137.2295313-137.22953063z" fill="#ffffff" p-id="1295"></path><path d="M600.99707954 692.93207364h341.98804635a28.80645712 28.80645712 0 0 0 22.61306894-46.65538194l-49.55818599-62.77591769a28.81864486 28.81864486 0 0 0-45.22613787 35.7310863l12.7302379 16.12053701h-282.52487008a28.80645712 28.80645712 0 0 0 0 57.61291423zM942.98512589 723.71066509H600.99707954a28.80645712 28.80645712 0 0 0-22.61306894 46.65538193l49.558186 62.78699766a28.80645712 28.80645712 0 0 0 45.21505923-35.69784838l-12.70807997-16.13161634h282.52487072a28.80645712 28.80645712 0 0 0 0-57.61291487z" fill="#ffffff" p-id="1296"></path></svg></li>'
    , bar2: '<li class="layui-icon" lay-type="bar2" id="utilbar2" style="margin:5px;border-radius:10px;background-color:#303336"><svg t="1647936760922" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1429" width="50" height="50"><path d="M790.79783707 299.10469941s-265.55042366 0.26762451-250.89798153 0a130.46695041 130.46695041 0 0 1-29.17107198-2.9104166s-10.83879281-18.19846693-30.54264761-46.83428987C459.64595453 219.28568822 435.79391974 224.30364786 435.79391974 224.30364786l-202.59175681-5.01795964C177.26863958 219.28568822 177.46935795 276.25625656 177.46935795 276.25625656v470.45044191c0 58.00761333 55.73280496 58.00761333 55.73280498 58.00761331h557.56222107c48.57384923 0 55.76625803-53.22382515 55.76625805-53.22382515V352.36197762c0-48.74111453-55.73280496-53.25727821-55.73280498-53.25727821z m0 425.79060118c0 17.93084242-9.33340493 26.76245135-27.89985555 26.76245136H261.10201848c-18.56645064 0-27.89985554-8.66434363-27.89985555-26.76245136V378.95716366c0-17.96429548 9.33340493-26.59518604 27.89985555-26.59518605h501.79596304c18.56645064 0 27.89985554 8.63089057 27.89985555 26.59518606z" p-id="1430" fill="#ffffff"></path><path d="M480.28649514 440.17627116v222.1283463a32.2487539 32.2487539 0 0 0 31.71350486 32.71709678 32.2487539 32.2487539 0 0 0 31.61314568-32.7840029V440.17627116a32.34911309 32.34911309 0 0 0-31.71350488-32.78400292 32.2487539 32.2487539 0 0 0-31.61314567 32.78400292z" p-id="1431" fill="#ffffff"></path><path d="M623.03072011 519.49348638H400.96927989a31.71350486 31.71350486 0 1 0 1e-8 63.56082199h222.0614402a31.71350486 31.71350486 0 1 0 1e-8-63.56082199z" p-id="1432" fill="#ffffff"></path></svg></li>'
    , bar3: '<li class="layui-icon" lay-type="bar3" id="utilbar3" style="margin:5px;border-radius:5px;background-color:#303336"><svg t="1647954264004" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1325" width="50" height="50"><path d="M782.97562159 346.70250618L508.34226312 188.20616147c-7.31862787-4.21375544-16.337543-4.21375544-23.65617085 0L221.73296816 339.67958045c-7.39255339 4.1398299-11.90201097 11.97593649-11.97593648 20.40344738l-0.07392555 303.53824222c0 8.42751087 4.50945758 16.26361746 11.82808543 20.47737288L496.51417769 842.44713656v0.07392555c14.78510679-8.42751087 23.65617085-24.02579852 23.65617086-40.88082027l-0.07392555-275.44653933 239.29695327-138.462525c14.56333017-8.5014364 23.58224531-24.09972406 23.58224532-41.02867133zM256.99544784 650.01897181V401.40740128l215.86255901 124.7123757v248.16801734L256.99544784 650.01897181z m239.37087879-164.85394062L280.94732083 360.37872994 496.51417769 236.03598192 712.08103456 360.45265549 496.36632663 485.16503119z" p-id="1326" fill="#ffffff"></path><path d="M804.04439875 630.28085426H709.41971535V535.65617085c0-13.0848195-10.57135135-23.65617085-23.65617084-23.65617085s-23.65617085 10.57135135-23.65617087 23.65617085v94.62468341H567.48269025c-13.0848195 0-23.65617085 10.57135135-23.65617086 23.65617084s10.57135135 23.65617085 23.65617086 23.65617085h94.62468339v94.6246834c0 13.0848195 10.57135135 23.65617085 23.65617087 23.65617086s23.65617085-10.57135135 23.65617084-23.65617086V677.59319595h94.6246834c13.0848195 0 23.65617085-10.57135135 23.65617085-23.65617085s-10.57135135-23.65617085-23.65617085-23.65617084z" p-id="1327" fill="#ffffff"></path></svg></li>'
    , bar4: '<li class="layui-icon" lay-type="bar4" id="utilbar4" style="margin:5px;border-radius:5px;background-color:#303336"><svg t="1649162998925" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1355" width="50" height="50"><path d="M739.53374064 193.23636899H284.29920896C234.00686248 193.23636899 193.23636899 234.00686248 193.23636899 284.29920896v455.23453168C193.23636899 789.82608715 234.00686248 830.59658061 284.29920896 830.59658061h455.23453168c50.29234648 0 91.06283997-40.77049348 91.06283997-91.06283997V284.29920896C830.59658061 234.00686248 789.82608715 193.23636899 739.53374064 193.23636899zM785.10756618 739.65710063A45.41448492 45.41448492 0 0 1 739.595421 785.10756618H284.404579c-12.17409392 0-23.66970823-4.67740167-32.27921009-13.28690497S238.72538414 751.83119455 238.72538414 739.65710063V284.34289937A45.69975522 45.69975522 0 0 1 284.404579 238.72538414h455.190842A45.55840527 45.55840527 0 0 1 785.10756618 284.34289937v455.31420127z" fill="#ffffff" p-id="1356"></path><path d="M711.19948133 398.06543686h-182.12568066a22.74450721 22.74450721 0 0 0 0 45.48901516h182.12568066a22.74450721 22.74450721 0 0 0 0-45.48901516zM711.19948133 580.2784976h-182.12568066a22.74450721 22.74450721 0 0 0 0 45.48901513h182.12568066a22.74450721 22.74450721 0 0 0 0-45.48901513zM392.48082557 523.38124894c-44.00612483 0-79.67002672 35.67418207-79.67002674 79.67002601s35.67418207 79.67002672 79.67002674 79.67002672 79.67002672-35.67418207 79.670026-79.67002672-35.66390189-79.67002672-79.670026-79.67002601z m24.17599805 103.85630426a34.18101157 34.18101157 0 1 1 10.02300278-24.17599808 33.9677011 33.9677011 0 0 1-10.02300278 24.17856846zM444.69553247 359.32267456L369.7131876 434.30244903 340.26611794 404.85280969a22.74450721 22.74450721 0 1 0-32.16613098 32.16613028l45.53013514 45.53270555a22.74450721 22.74450721 0 0 0 32.16613099 0l91.06283996-91.06284069a22.74450721 22.74450721 0 0 0-32.16356058-32.16613027z" fill="#ffffff" p-id="1357"></path></svg></li>'
    , bar5: '<li class="layui-icon" lay-type="bar5" id="utilbar5" style="margin:5px;border-radius:5px;background-color:#303336"><svg t="1647938298678" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1324" width="50" height="50"><path d="M824.040339 789.84644584L232.62693201 198.43303886A23.50998078 23.50998078 0 0 0 215.52876411 191.41057735 24.1206294 24.1206294 0 0 0 191.4081347 215.53120675V808.16591159a24.42595369 24.42595369 0 0 0 24.12062941 24.42595371h592.94002914a23.81530508 23.81530508 0 0 0 18.3194651-8.54908365 24.1206294 24.1206294 0 0 0-2.74791935-34.19633581z m-584.08562117-5.80116367V274.15349564l23.50998077 23.50998078-3.96921783 3.96921783a20.1514122 20.1514122 0 1 0 28.70049584 28.39517089l3.66389352-3.66389289 43.66139237 43.35606806-19.23543866 19.23543864a20.1514122 20.1514122 0 0 0-5.80116429 14.04492362 20.4567365 20.4567365 0 0 0 20.1514122 20.45673588 19.84608726 19.84608726 0 0 0 13.4342744-6.10648795l18.93011433-18.93011436L407.57782638 441.77660419 405.1352307 445.74582139a20.1514122 20.1514122 0 1 0 28.70049582 28.39517154L435.66767297 470.47710001l43.66139236 43.35606806-19.23543867 19.23543866a20.4567365 20.4567365 0 0 0 1e-8 28.39517092 21.37270942 21.37270942 0 0 0 14.35024793 5.80116427 20.7620608 20.7620608 0 0 0 14.35024792-5.80116427l18.93011435-18.93011436 43.66139236 43.35606804-3.96921721 3.96921784a20.1514122 20.1514122 0 0 0 14.35024791 34.50165948 20.4567365 20.4567365 0 0 0 14.35024731-6.10648795l3.6638935-3.66389353 43.66139236 43.35606805-19.23543864 19.23543865A20.1514122 20.1514122 0 0 0 618.86232667 710.46209615a20.7620608 20.7620608 0 0 0 14.35024792-5.80116427l18.93011434-18.93011373 43.66139236 43.35606805-3.96921783 3.96921722a20.1514122 20.1514122 0 1 0 28.70049585 28.39517152l3.66389353-3.96921783 25.64725153 25.64725154z" p-id="1325" fill="#ffffff"></path><path d="M365.44305556 541.00704176a23.50998078 23.50998078 0 0 0-17.09816729-7.02246211 24.42595369 24.42595369 0 0 0-24.1206294 24.12062939v117.2445784a24.42595369 24.42595369 0 0 0 24.1206294 24.42595369H466.20011526a24.42595369 24.42595369 0 0 0 24.1206294-24.42595369 23.81530508 23.81530508 0 0 0-8.54908363-18.31946514z m7.32778639 110.22211629v-34.50165948l34.50165948 34.50165948z" p-id="1326" fill="#ffffff"></path></svg></li>'
    , bar6: '<li class="layui-icon" lay-type="bar6" id="utilbar6" style="margin:5px;border-radius:5px;background-color:#303336"><svg t="1647938518774" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1294" width="50" height="50"><path d="M810.80162904 840.66946683h-312.23599352a29.58025203 29.58025203 0 0 1 0-59.16050403h312.23599352a29.58025203 29.58025203 0 1 1 0 59.16050403zM758.71573529 325.33217631L325.80053031 758.24738128l-72.39766679 12.40727239L265.4978999 697.69824875l432.79195391-432.79195391 60.42588148 60.42588148m74.3696836-9.29312919L707.55833277 190.53661122a13.14677869 13.14677869 0 0 0-18.58625838 0L216.6083167 662.92501917a28.02728879 28.02728879 0 0 0-7.80589985 15.25026326l-21.32243165 128.37007701a26.29355734 26.29355734 0 0 0 30.40192566 30.22115749l127.67165441-21.87295304a28.10123939 28.10123939 0 0 0 15.102362-7.8223333l472.46235857-472.46235857a13.14677869 13.14677869 0 0 0 0-18.59447509z" p-id="1295" fill="#ffffff"></path></svg></li>'
    , css: { right: 17, top: 261 }
    , bgcolor: '#393D49'
    , click: function (type) {
        if (type === 'bar1') {
            //项目授权
            ModelProjectAuth();
        } else if (type === 'bar2') {
            //新建项目
            if (modelprojectinfoaddlayerindex != null) {
                layer.setTop(modelprojectinfoaddlayerindex);
            }
            else {
                if (modelprojectinfoviewlayerindex == null
                    && modelprojectinfoeditlayerindex == null
                    && modeltaskinfoviewlayerindex == null
                    && modeltaskinfoaddlayerindex == null
                    && modeltaskinfoeditlayerindex == null
                    && modelprojectauthlayerindex == null
                    && modeltaskprocesslayerindex == null
                    && modelheaderuserlayerindex == null
                    && modelheadernoticelayerindex == null
                    && modelheadersetlayerindex == null
                ) {
                    AddModelProject();
                }
                else {
                    layer.confirm('<p style="font-size:16px">是否确定新建实景模型项目？</p><br/>', { icon: 3, title: ['系统提示', 'font-weight:bold;font-size:large;font-family:Microsoft YaHei'], zIndex: layer.zIndex, success: function (layero) { layer.setTop(layero); } }, function (index) {
                        CloseAllLayer();
                        AddModelProject();
                        layer.close(index);
                    });
                }
            }
        }
        else if (type === 'bar3') {
            //新建模型
            if (modeltaskinfoaddlayerindex != null) {
                layer.setTop(modeltaskinfoaddlayerindex);
            }
            else {
                if (modelprojectinfoviewlayerindex == null
                    && modelprojectinfoaddlayerindex == null
                    && modelprojectinfoeditlayerindex == null
                    && modeltaskinfoviewlayerindex == null
                    && modeltaskinfoeditlayerindex == null
                    && modelprojectauthlayerindex == null
                    && modeltaskprocesslayerindex == null
                    && modelheaderuserlayerindex == null
                    && modelheadernoticelayerindex == null
                    && modelheadersetlayerindex == null
                ) {
                    AddModelTask(currentprojectid);
                }
                else {
                    layer.confirm('<p style="font-size:16px">是否确定新建模型？</p><br/>', { icon: 3, title: ['系统提示', 'font-weight:bold;font-size:large;font-family:Microsoft YaHei'], zIndex: layer.zIndex, success: function (layero) { layer.setTop(layero); } }, function (index) {
                        CloseAllLayer();
                        AddModelTask(currentprojectid);
                        layer.close(index);
                    });
                }
            }
        }
        else if (type === 'bar4') {
            //任务管理
            LoadTaskManage();
        }
        else if (type === 'bar5') {
            //测量工具
            if (curtileset == null) {
                Measurewidget("terrain");
            }
            else {
                Measurewidget("model");
            }
        }
        else if (type === 'bar6') {
            //标注工具
            Markwidget(currentprojectid);
        }
        else if (type === 'bar7') {
        }
    }
});


//提示
$("#utilbar1").on("mouseenter", function () {
    if (tipslayer == -1) {
        tipslayer = layer.tips('授权管理', '#utilbar1', {
            tips: [4, '#78BA32']
        });
    }
});
$("#utilbar1").on("mouseleave", function () {
    if (tipslayer != -1) {
        layer.close(tipslayer);
        tipslayer = -1;
    }
});

$("#utilbar2").on("mouseenter", function () {
    if (tipslayer == -1) {
        tipslayer = layer.tips('新建项目', '#utilbar2', {
            tips: [4, '#78BA32']
        });
    }
});
$("#utilbar2").on("mouseleave", function () {
    if (tipslayer != -1) {
        layer.close(tipslayer);
        tipslayer = -1;
    }
});

$("#utilbar3").on("mouseenter", function () {
    if (tipslayer == -1) {
        tipslayer = layer.tips('新建模型', '#utilbar3', {
            tips: [4, '#78BA32']
        });
    }
});
$("#utilbar3").on("mouseleave", function () {
    if (tipslayer != -1) {
        layer.close(tipslayer);
        tipslayer = -1;
    }
});

$("#utilbar4").on("mouseenter", function () {
    if (tipslayer == -1) {
        tipslayer = layer.tips('任务管理', '#utilbar4', {
            tips: [4, '#78BA32']
        });
    }
});
$("#utilbar4").on("mouseleave", function () {
    if (tipslayer != -1) {
        layer.close(tipslayer);
        tipslayer = -1;
    }
});

$("#utilbar5").on("mouseenter", function () {
    if (tipslayer == -1) {
        tipslayer = layer.tips('测量工具', '#utilbar5', {
            tips: [4, '#78BA32']
        });
    }
});
$("#utilbar5").on("mouseleave", function () {
    if (tipslayer != -1) {
        layer.close(tipslayer);
        tipslayer = -1;
    }
});

$("#utilbar6").on("mouseenter", function () {
    if (tipslayer == -1) {
        tipslayer = layer.tips('标注工具', '#utilbar6', {
            tips: [4, '#78BA32']
        });
    }
});
$("#utilbar6").on("mouseleave", function () {
    if (tipslayer != -1) {
        layer.close(tipslayer);
        tipslayer = -1;
    }
});
